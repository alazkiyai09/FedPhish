# Configuration for Multi-Agent Phishing Detection System

# LLM Backend Configuration
llm:
  backend: "mock"  # Options: "openai", "ollama", "mock"
  model: "mock-model"
  api_key: null  # Set via environment variable OPENAI_API_KEY
  base_url: null  # For OpenAI: https://api.openai.com/v1
  timeout: 30  # seconds
  max_retries: 2

  # OpenAI-specific
  openai:
    model: "gpt-4"
    temperature: 0.0
    max_tokens: 1000

  # Ollama-specific (local)
  ollama:
    model: "mistral:7b"
    base_url: "http://localhost:11434"
    temperature: 0.0

  # Mock-specific (testing)
  mock:
    response_delay_ms: 0  # Simulate API latency
    responses_file: null  # Path to predefined responses JSON

# Agent Configuration
agents:
  url_analyst:
    enabled: true
    weight: 1.0  # Weight in final voting
    temperature: 0.0
    max_retries: 2

  content_analyst:
    enabled: true
    weight: 1.2  # Slightly higher weight for content analysis
    temperature: 0.0
    max_retries: 2

  header_analyst:
    enabled: true
    weight: 1.1
    temperature: 0.0
    max_retries: 2

  visual_analyst:
    enabled: true
    weight: 0.8  # Lower weight (placeholder for now)
    temperature: 0.0
    max_retries: 2

  financial_specialist:
    enabled: true
    weight: 1.3  # Higher weight for financial domain
    temperature: 0.0
    max_retries: 2

# Coordinator Configuration
coordinator:
  execution_mode: "parallel"  # Options: "parallel", "sequential"
  decision_threshold: 0.5  # Confidence threshold for phishing decision
  voting_method: "weighted"  # Options: "weighted", "majority", "confidence_weighted"
  conflict_resolution: "highest_confidence"  # Options: "highest_confidence", "weighted_vote", "manual_review"

  # Parallel execution settings
  parallel_timeout: 60  # seconds
  max_concurrent_agents: 5

  # Graceful degradation
  continue_on_agent_failure: true
  min_required_agents: 2

# Cache Configuration
cache:
  enabled: true
  backend: "memory"  # Options: "memory", "redis"
  ttl: 3600  # seconds (1 hour)
  max_size: 1000  # Maximum cached responses

  # Redis-specific (if backend=redis)
  redis:
    host: "localhost"
    port: 6379
    db: 0

# Rate Limiting
rate_limiting:
  enabled: true
  requests_per_minute: 60  # For OpenAI API
  burst_size: 10

# Cost Tracking
cost_tracking:
  enabled: true
  log_file: "logs/cost_tracking.log"
  # Cost per 1K tokens (adjust based on current pricing)
  openai:
    gpt4_input: 0.03
    gpt4_output: 0.06
    gpt35_turbo_input: 0.0015
    gpt35_turbo_output: 0.002

# Logging
logging:
  level: "INFO"  # Options: "DEBUG", "INFO", "WARNING", "ERROR"
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  file: "logs/agent_system.log"
  rotation: "10 MB"

# Evaluation Configuration
evaluation:
  metrics:
    - "accuracy"
    - "precision"
    - "recall"
    - "f1"
    - "auc_roc"
    - "latency"
    - "cost"

  cross_validation:
    enabled: true
    folds: 5

  per_agent_analysis: true
  ensemble_comparison: true
  reasoning_quality_assessment: true

# Financial Domain Specifics
financial_domain:
  # Known legitimate bank domains
  legitimate_domains:
    - "chase.com"
    - "wellsfargo.com"
    - "bankofamerica.com"
    - "citi.com"
    - "usbank.com"
    - "capitalone.com"
    - "schwab.com"
    - "fidelity.com"

  # High-risk keywords
  urgency_keywords:
    - "immediate action required"
    - "account suspended"
    - "urgent notice"
    - "verify immediately"
    - "wire transfer"
    - "payment due"
    - "overdue payment"

  credential_keywords:
    - "password"
    - "ssn"
    - "social security"
    - "account number"
    - "routing number"
    - "verify your identity"
    - "confirm your information"

# Data Configuration
data:
  raw_dir: "data/raw"
  processed_dir: "data/processed"
  cache_dir: "data/cache"

  supported_formats:
    - "eml"  # Email format
    - "json"  # Structured data
    - "csv"  # Batch processing

# Testing
testing:
  mock_llm_for_tests: true
  test_data_dir: "tests/fixtures"
  predefined_responses: "tests/fixtures/mock_responses.json"
